---
#--- official ---#
# seminararbeit im Seminar: Neuropragmatik, WS22/23 FUB
# im Fach Sprachwissenschaften
# von Stephan Schwarz
# Abgabe: 2022-11-20

title: "N-PRG conversation analysis"
author: "St. Schwarz"
date: "`r Sys.Date()`"
zotero: AVL_dyn
output: 
  html_document:
    toc: yes
    toc_float:
      collapsed: no
      smooth_scroll: no
    self_contained: FALSE #TRUE for standalone html page knit
    #css: ../style_HA.css
#swap / decomment ff .bib/.css references for self compile .Rmd to html
#bibliography: https://raw.githubusercontent.com/esteeschwarz/DH_essais/main/sections/DD/klemm_HA/top/klemm.bib
   # css: https://ada-sub.rotefadenbuecher.de/skool/public/papers/011/style_HA.css
#bibliography: https://api.zotero.org/groups/4713246/collections/ZW6MCU2J/items/top?format=biblatex
bibliography: PRG_CA.bib
---
# A. head
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
to self compile the RMarkdown template to this page in RStudio cf. [@esteeschwarz_klemm_2022-1](https://github.com/esteeschwarz/DH_essais/blob/main/sections/DD/klemm_HA/top/M/klemm_HA_temp_BASE.Rmd)

switch on podcast audio if you like...
```{=html}
<!-- placeholder for begleitaudiospur static .mp3-->
<!----><audio controls>
  <source src="https://ephemeridenmusik.rotefadenbuecher.de/wp-content/uploads/FM017_klemmHA.mp3" type="audio/mpeg">
You would hear audio but your browser does not support the audio element.
</audio><!---->
<!-- placeholder for begleitaudiospur spotify podcast-->
<!--<iframe src="https://open.spotify.com/embed/episode/0Z9JS54zC15Fh099ovAKce?utm_source=generator" width="100%" height="232" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>-->
```

---

# 1. einleitung

# 2. klemm


# 3. dokumentation aufbereitung

# 4. some visualisations
## 4.1 basic statistics

```{r eval=TRUE, echo=FALSE, warning=FALSE,message=FALSE}
#library(jsonlite)
library(syuzhet)
library(readr)

root<-"~/boxHKW/21S/DH/"
expo<-paste0(root,"local/CA/PRG/expo/")
#setwd(local)
#src<-"wolf_FF_1.json"
#src<-paste0(local,"wolf_FF-LEN_1.json")
###
#mini
#setwd("~/boxHKW/21S/DH/")
#lapsi, ewa
#setwd("~/boxHKW/UNI/21S/DH/")

#path1<-"local/CA/PRG/expo/"
src<-list.files(expo)
src<-paste0(expo,src)
trans_ns<-c("tier","type","speaker","text","start","end","category","label")
#dta<-read.csv2(src,header=F,sep = "\t",col.names = trans_ns)
dta <- read_delim(paste0(expo,"PRG_CA_elanSF-chat002EoutEX-OX-EX.csv"), 
                  delim = "\t", escape_double = FALSE, 
                  col_names = trans_ns, trim_ws = TRUE)

###
trp<-dta$category=="TRP"
trp1<-dta$start[trp]
trp2<-c(dta$start[1],trp1)
trp3<-c(trp1,dta$end[length(dta$end)])
trp4<-trp3-trp2
barplot(trp4)
library(syuzhet)
trp5<-get_transformed_values(trp4)
plot(trp5,type = "h")
plot(trp5,type="h",main="TRP evaluation",ylab="relative length of phase",xlab="flow of conversation",col=2)
points(trp5, cex = .2, col = "dark red")
###wks.
spk0<-dta$speaker=="SPK_SP0"&dta$category=="main"
spk1<-dta$speaker=="SPK_SP1"&dta$category=="main"
spk2<-dta$end[spk0]
spk3<-dta$end[spk1]
spk4<-dta$start[spk0]
spk5<-spk2-spk4 #
spk5[spk0]
sum(spk0)
sum(spk1)
spk6<-dta$start[spk1]
spk7<-spk3-spk6
sum(spk7)
sum(spk5)
spk8<-get_transformed_values(spk5)
spk9<-get_transformed_values(spk7)
plot(spk8,type="h",main="utterance length ~ dialog",ylab="relative length of phase (ms)",xlab="flow of conversation",col=2)
par(new=T)
plot(spk9,type="h",ann = F,col=3,yaxt="n")
spk10<-(1/spk9-1/spk8)
#spk10<-sqrt(spk10*spk10)
#spk10<-get_transformed_values(spk10)
par(new=T)
plot(spk10,type="l",ann = F,col=4,yaxt="n")

```

```{r echo = FALSE,warning=FALSE}
###semantic statistics
library(stringi)
tsp0<-dta$text[spk0]
tsp01<-unlist(stri_split(tsp0,regex = " "))
regx1<-"[^A-Za-zäöü]"
tsp02<-gsub(regx1,NA,tsp01)
tna<-!is.na(tsp02)
words_spk0<-sum(tna)

tsp0<-dta$text[spk1]
tsp01<-unlist(stri_split(tsp0,regex = " "))
regx1<-"[^A-Za-zäöü]"
tsp02<-gsub(regx1,NA,tsp01)
tna<-!is.na(tsp02)
words_spk1<-sum(tna)

length(tsp01)

```

```{r echo = FALSE,warning=FALSE}
```

## 4.3 stats
number of words SPK0:```{r}cat(words_sp0)```
number of words SPK1:```{r}cat(words_sp1)```

Q: cf. [[@jockers_2015]](https://www.matthewjockers.net/2015/02/02/syuzhet/)

## 4.5 varianzen
Auf dieser Grundlage bieten sich weitere Analysen an, die den Rahmen dieser Arbeit jedoch übersteigen. (m) Erste Vergleiche beider Editionen lassen vermuten, dasz die Varianzen in Stil und Orthographie auf Klemm selbst zurückgehen, da wir hier davon ausgehen, dasz er als Herausgeber der Wochenblätter, in denen die erste und zweite Ausgabe erschienen, weitgehend eigenverantwortlich editorisch tätig war.
Die im folgenden genannten Varianzen lieszen sich mithilfe des oben verwendeten tools LERA als deutlich unterschieden unterhalb der Editionen erkennen. Welche Gründe Klemm hier zur Neuschreibung bewegten, liesz sich im Rahmen der Arbeit nicht mehr eruieren; die folgende Graphik veranschaulicht eventuelle Zusammenhänge, die sich mir jedoch nicht erschlieszen.
---

# B. REF:
